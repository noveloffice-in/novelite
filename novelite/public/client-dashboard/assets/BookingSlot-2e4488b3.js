import{c as P,_ as j,E as G,r as v,u as K,v as X,j as n,e as R,a as pe,I as ue,$ as ge,a0 as me,a1 as fe,a2 as be}from"./index-70c16ae5.js";import{P as ye}from"./PageContainer-91040e30.js";import{B as he}from"./Breadcrumb-a9d4acc6.js";import{C as Y}from"./ChildCard-87dd0c98.js";import{u as ve,G as xe}from"./Grid-83d49afb.js";import{B as Se}from"./Box-82996840.js";import{f as Z,g as ee,s as te,B as $e,h as A,a as oe,T as Q}from"./Typography-d7f7ee89.js";import{k as Ce,Q as V}from"./ReactToastify-2433f72e.js";import{F as Te,I as ke,S as Be}from"./Select-f90308ba.js";import{M as Re}from"./MenuItem-9bff3e50.js";import{B as De}from"./Button-8063fc5a.js";import{S as Me}from"./Stack-af223930.js";import{u as Ne}from"./useDispatch-3ad91a4c.js";import"./index.esm-0f7c1405.js";import"./useSlotProps-a5cefa40.js";import"./Link-1acea9b5.js";import"./Box-9e9cbe27.js";import"./Card-d738e094.js";import"./Paper-44d27fac.js";import"./CardHeader-6b3a08ee.js";import"./Divider-86232ad0.js";import"./CardContent-9e389890.js";import"./clsx.m-1229b3e0.js";import"./Modal-13a473dc.js";import"./useControlled-7ff99a89.js";import"./createStack-2130904b.js";import"./styled-3924aa5a.js";function je(e){return ee("MuiToggleButton",e)}const _e=Z("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),q=_e,Oe=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],ze=e=>{const{classes:o,fullWidth:r,selected:a,disabled:c,size:f,color:x}=e,b={root:["root",a&&"selected",c&&"disabled",r&&"fullWidth",`size${P(f)}`,x]};return oe(b,je,o)},We=te($e,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,o[`size${P(r.size)}`]]}})(({theme:e,ownerState:o})=>{let r=o.color==="standard"?e.palette.text.primary:e.palette[o.color].main,a;return e.vars&&(r=o.color==="standard"?e.vars.palette.text.primary:e.vars.palette[o.color].main,a=o.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[o.color].mainChannel),j({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},o.fullWidth&&{width:"100%"},{[`&.${q.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:G(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.selected}`]:{color:r,backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:G(r,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${a} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:G(r,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:G(r,e.palette.action.selectedOpacity)}}}},o.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},o.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),Ie=v.forwardRef(function(o,r){const a=K({props:o,name:"MuiToggleButton"}),{children:c,className:f,color:x="standard",disabled:b=!1,disableFocusRipple:h=!1,fullWidth:i=!1,onChange:s,onClick:p,selected:C,size:g="medium",value:D}=a,_=X(a,Oe),T=j({},a,{color:x,disabled:b,disableFocusRipple:h,fullWidth:i,size:g}),M=ze(T),O=l=>{p&&(p(l,D),l.defaultPrevented)||s&&s(l,D)};return n.jsx(We,j({className:A(M.root,f),disabled:b,focusRipple:!h,ref:r,onClick:O,onChange:s,value:D,ownerState:T,"aria-pressed":C},_,{children:c}))}),we=Ie;function Fe(e,o){return o===void 0||e===void 0?!1:Array.isArray(o)?o.indexOf(e)>=0:e===o}function Le(e){return ee("MuiToggleButtonGroup",e)}const Ge=Z("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth"]),$=Ge,Pe=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Ee=e=>{const{classes:o,orientation:r,fullWidth:a,disabled:c}=e,f={root:["root",r==="vertical"&&"vertical",a&&"fullWidth"],grouped:["grouped",`grouped${P(r)}`,c&&"disabled"]};return oe(f,Le,o)},Ue=te("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[{[`& .${$.grouped}`]:o.grouped},{[`& .${$.grouped}`]:o[`grouped${P(r.orientation)}`]},o.root,r.orientation==="vertical"&&o.vertical,r.fullWidth&&o.fullWidth]}})(({ownerState:e,theme:o})=>j({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${$.grouped}`]:j({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${$.selected} + .${$.grouped}.${$.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${$.selected} + .${$.grouped}.${$.selected}`]:{borderTop:0,marginTop:0}})})),Ae=v.forwardRef(function(o,r){const a=K({props:o,name:"MuiToggleButtonGroup"}),{children:c,className:f,color:x="standard",disabled:b=!1,exclusive:h=!1,fullWidth:i=!1,onChange:s,orientation:p="horizontal",size:C="medium",value:g}=a,D=X(a,Pe),_=j({},a,{disabled:b,fullWidth:i,orientation:p,size:C}),T=Ee(_),M=(l,N)=>{if(!s)return;const z=g&&g.indexOf(N);let W;g&&z>=0?(W=g.slice(),W.splice(z,1)):W=g?g.concat(N):[N],s(l,W)},O=(l,N)=>{s&&s(l,g===N?null:N)};return n.jsx(Ue,j({role:"group",className:A(T.root,f),ref:r,ownerState:_},D,{children:v.Children.map(c,l=>v.isValidElement(l)?v.cloneElement(l,{className:A(T.grouped,l.props.className),onChange:h?O:M,selected:l.props.selected===void 0?Fe(l.props.value,g):l.props.selected,size:l.props.size||C,fullWidth:i,color:l.props.color||x,disabled:l.props.disabled||b}):null)}))}),He=Ae;function Je({slotsData:e,selectedSlots:o,setSelectedSlots:r,intervals:a}){const c=ve(),f=i=>{const[s,p]=i.split(":").map(Number);return s*60+p},x=i=>i.sort((s,p)=>{const C=f(s.split(" - ")[0]),g=f(p.split(" - ")[0]);return C-g}),b=i=>{let s=[];return e==null||e.forEach(p=>{s=s.concat(p.booking_timings.split(","))}),s==null?void 0:s.some(p=>p===i)},h=(i,s)=>{const p=x(s);console.log(p),r(p)};return n.jsx(Se,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(3, 1fr)",md:"repeat(8, 1fr)",ls:"repeat(9, 1fr)"},gap:"16px"},children:(a==null?void 0:a.length)!==0&&a.map((i,s)=>n.jsx(He,{value:o,onChange:h,"aria-label":"text formatting",children:n.jsxs(we,{value:i,disabled:b(i),variant:"contained",sx:{width:"100%",border:(c.palette.mode==="dark","1px solid grey"),color:c.palette.mode==="dark"?"white":"black","&.Mui-selected":{backgroundColor:c.palette.mode==="dark"?"#154c79":"#5462D6",color:"white",boxShadow:c.palette.mode==="dark"?"2px 2px 2px black":"2px 2px 2px grey"},"&.Mui-disabled":{backgroundColor:"rgba(0, 0, 0, 0.12)",color:(c.palette.mode==="dark","grey")}},children:[i.split("-")[0]," - ",i.split("-")[1]]},s)},i+s))})}function xt(){const[e,o]=v.useState(`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`),[r,a]=v.useState([]),[c,f]=v.useState([]),[x,b]=v.useState(""),h=R(t=>t.bookingsSliceReducer.roomName),i=R(t=>t.bookingsSliceReducer.roomCategory),s=R(t=>t.bookingsSliceReducer.bookingLocation),p=R(t=>t.novelprofileReducer.account_type),C=R(t=>t.novelprofileReducer.companyName),g=R(t=>t.novelprofileReducer.location),D=R(t=>t.novelprofileReducer.leadsID),_=pe(),T=Ne();let M=30,O=7;const l=[{to:"/dashboard",title:"Home"},{to:"/location",title:"Location"},{to:"/category",title:"Category"},{to:"/bookings",title:h},{to:"/bookingslot",title:"Booking Slots"}],z=R(t=>t.bookingsSliceReducer.price)/2*r.length,W=z*(18/100),re=z+W;v.useEffect(()=>{const t=[],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let S=0;S<O;S++){const u=new Date;u.setDate(u.getDate()+S);const B=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`,m=`${String(u.getDate()).padStart(2,"0")}-${k[u.getMonth()]}`,y=d[u.getDay()];t.push({date:B,day:y,formattedDate:m})}f(t),b(t[0].day)},[O]);const ae=t=>V.warn(t,{toastId:"warn"}),se=t=>V.error(t,{toastId:"error"});let E="",w="",H=[];const{data:U}=ue("Room Booking Settings","Room Booking Settings"),{data:J,isLoading:ne}=ge("/novelite.api.api.getAllData");let F;if(J&&(F=Object.values(J.message.reduce((t,{name:d,room:k,from_time:S,to_time:u,booking_date:B})=>(t[d]?t[d].booking_timings+=`,${S} - ${u}`:t[d]={name:d,room:k,booking_timings:`${S} - ${u}`,booking_date:B},t),{})),F=F.filter(t=>t.room===h&&t.booking_date===e)),c.length!==0){let t=U==null?void 0:U.availability_of_slots.find(d=>d.day_of_week==x);E=t==null?void 0:t.from_time,w=t==null?void 0:t.to_time,w==="23:59:59"&&(w="24:00:00")}if(E!==void 0&&w!==void 0){const t=m=>{var L;const[y,I]=(L=m==null?void 0:m.split(":"))==null?void 0:L.map(Number);return y*60+I},d=m=>{const y=Math.floor(m/60)%24,I=m%60;return`${String(y).padStart(2,"0")}:${String(I).padStart(2,"0")}`},k=t(E),u=t(w)-k,B=Math.floor(u/M);for(let m=0;m<B;m++){const y=k+m*M,I=y+M,L=I>=1440?0:I;H.push(`${d(y)} - ${d(L)}`)}}const ie=t=>{a([]),b(t.day),o(t.date)},{call:le}=me("/novelite.api.api.addDataToDoc"),ce=()=>{let t=`${r}`,d=`${D}-${g}`,[k,S,u]=e.split("-"),B=`${k}-${S}-${u}`,m={location:s,room:h,price:re,room_type:i,customer:C,client_type:p,booking_date:B,customer_lead_id:d,booking_timings:t,booking_status:"Blocked Temporarily"};r.length!==0?le(m).then(()=>{T(fe(r)),T(be(B)),a([]),_("/payment_summary")}).catch(y=>{se(y.message),console.log("inside catch "+JSON.stringify(y.message))}):ae("Please Select any slot to continue")};function de(t){if(Number.isInteger(t)){let d=t.toString();return d.length>3?d.slice(0,-3)+","+d.slice(-3):d}else return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}return n.jsxs(ye,{title:"Book Slots - Novel Office",children:[n.jsx(he,{title:"Booking Slots",items:l}),n.jsxs(Te,{sx:{minWidth:130,mb:2,mr:4},children:[n.jsx(ke,{id:"demo-simple-select-label",children:"Select Date"}),n.jsx(Be,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e,label:"Select Date",children:c==null?void 0:c.map(t=>n.jsx(Re,{value:t.date,onClick:()=>ie(t),children:t.formattedDate},t.date))})]}),!ne&&n.jsx(Je,{slotsData:F,intervals:H,selectedSlots:r,setSelectedSlots:a}),n.jsxs(xe,{item:!0,xs:12,lg:6,display:"flex",alignItems:"stretch",mt:2,children:[n.jsx(Y,{title:"",children:n.jsx(De,{variant:"contained",color:"primary",onClick:ce,children:"Proceed"})}),n.jsx(Y,{title:"",children:n.jsxs(Me,{children:[n.jsxs(Q,{variant:"h4",mb:.5,children:["Price : â‚¹ ",de(z)]}),n.jsx(Q,{variant:"h6",color:"primary",children:"(* GST not included)"})]})})]}),n.jsx(Ce,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}export{xt as default};
